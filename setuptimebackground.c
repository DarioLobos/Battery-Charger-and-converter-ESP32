/*
 * display_commands.c
 *
 *  Created on: Jan 16, 2026
 *      Author: dario Lobos
 */

#include <stdint.h>
#include "esp_heap_caps.h"
#include "config_main.h"



uint16_t* setup_time_bkg_pointers[STROWARRAY]; // Array of pointers (likely in DRAM/IRAM)


void setup_time_bkg_allocation(void){


// Allocate memory for each row in PSRAM
for (int i = 0; i < STROWARRAY; i++) {
    setup_time_bkg_pointers[i] = (uint16_t*)heap_caps_malloc(COLARRAY * sizeof(uint16_t), MALLOC_CAP_SPIRAM | MALLOC_CAP_8BIT);
    if (setup_time_bkg_pointers[i] == NULL) {
        printf("Failed to allocate row %d\n", i);
        return;
        }
}

// after transfer to EXT RAM clean this array SEE BELLOW 

uint16_t background [STROWARRAY][STCOWARRAY]=

{{0x6e1e, 0xbebc, 0xe6b9, 0xd617, 0xcdf6, 0xa491, 0x83ae, 0x8c30,
 0x7bae, 0x7bae, 0x736e, 0x52ac, 0x3a2a, 0x08e6, 0x0084, 0x0084,
 0x00e6, 0x0107, 0x018a, 0x1aaf, 0x4d5c, 0x5e1f, 0x5e1f, 0x5e1f,
 0x5e1f, 0x5e1f, 0x5e1f, 0x5e1f, 0x5e1f, 0x5e3f, 0x5e3f, 0x5e3f,
 0x5e3f, 0x5e3f, 0x5e3f, 0x5e3f, 0x663f, 0x663f, 0x663f, 0x661f,
 0x5d7c, 0x4cb7, 0x553b, 0x5dfe, 0x663f, 0x663f, 0x663f, 0x663f,
 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f,
 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f,
 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f,
 0x663f, 0x663f, 0x6e3f, 0x6e3f, 0x6e3f, 0x6e3f, 0x663f, 0x6e3f,
 0x6e3f, 0x6e3f, 0x6e3f, 0x6e3f, 0x6e3f, 0x6e3f, 0x6e3f, 0x6e5f}, 

{ 0x761e, 0xc6bc, 0xe6b9, 0xde37, 0xcdb3, 0xad2d, 0xad0a, 0xad2b,
 0x8c0d, 0x7baf, 0x73af, 0x630b, 0x6b68, 0x7bc5, 0x8403, 0x2944,
 0x00c6, 0x1127, 0x4268, 0x7c2c, 0x8577, 0x95f8, 0xa5f5, 0xa5d4,
 0x95f8, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x663f,
 0x663f, 0x663f, 0x663f, 0x663f, 0x663f, 0x9619, 0x663f, 0x663f,
 0x663f, 0x75ba, 0x9d50, 0xa5b2, 0x9df6, 0x7e1d, 0x663f, 0x665f,
 0x663f, 0x663f, 0x6e3f, 0x6e3f, 0x6e3f, 0x6e3f, 0x6e3f, 0x763e,
 0x9619, 0x8e1a, 0x9e18, 0xa5f5, 0xa5f4, 0x9618, 0x7e3d, 0x8e1a,
 0x6e5f, 0x6e5f, 0x6e5f, 0x6e5f, 0x863c, 0x9e18, 0x6e5f, 0x6e5f,
 0x6e5f, 0x6e5f, 0x6e5f, 0x7e3d, 0x863c, 0x6e5f, 0x6e5f, 0x6e5f,
 0x6e5f, 0x6e5f, 0x765e, 0x863c, 0x9619, 0x9e18, 0x763f, 0x6e5f}, 

{ 0x763e, 0xc69a, 0xd632, 0xc5c8, 0xbda3, 0xbda3, 0xbda3, 0xbda3,
 0xbda3, 0xad0a, 0xb566, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3,
 0xbd83, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3,
 0xbda3, 0x861b, 0x663f, 0x663f, 0x663f, 0x663f, 0x863c, 0x7e3d,
 0x663f, 0x663f, 0x6e3f, 0x6e3f, 0x7e3d, 0xbda3, 0x8e1b, 0x6e5f,
 0x8e1b, 0xbda5, 0xbda3, 0xbda3, 0xbda3, 0xbda4, 0x863d, 0x6e5f,
 0x6e5f, 0x6e5f, 0x6e5f, 0x6e5f, 0xb5cd, 0xbdc8, 0xbda3, 0xbda3,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xb5ce,
 0x765f, 0x6e5f, 0x6e5f, 0x7e5e, 0xbdc9, 0xbda3, 0xadf1, 0x765f,
 0x765f, 0x765f, 0x765f, 0xb5cd, 0xbda5, 0x8e3a, 0x765f, 0x8e3c,
 0xa5f5, 0xb5ce, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xadf3, 0x765f}, 

{ 0x9e18, 0xbda4, 0xbda3, 0xbda3, 0xbda5, 0xbd69, 0xb568, 0xbd89,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xb544, 0x9c84, 0xb583,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xadd1, 0xa5f4, 0x9df7,
 0x9618, 0x763e, 0x6e3f, 0x6e3f, 0x6e5f, 0x6e5f, 0xb5d0, 0xb5cd,
 0x6e5f, 0x6e5f, 0x6e5f, 0x6e5f, 0x9619, 0xbda3, 0xa5f5, 0x6e5f,
 0xbdcc, 0xbda3, 0xbda3, 0xbda6, 0xbda3, 0xbda3, 0xa5f4, 0x765f,
 0x765f, 0x765f, 0x765f, 0x765f, 0xb5d0, 0xbda3, 0xbda3, 0xbda3,
 0xbda3, 0xbda3, 0xadf1, 0xa5f4, 0xa617, 0xadf4, 0xbda3, 0xbda3,
 0x865d, 0x765f, 0x765f, 0xadf3, 0xbda3, 0xbda3, 0xbda3, 0x865e,
 0x765f, 0x7e5e, 0xb5f0, 0xbda3, 0xbda3, 0xb5cf, 0x765f, 0xbdc7,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xb5cd, 0xadf4, 0x865d, 0x765f}, 

{ 0xb5d0, 0xbda3, 0xbda3, 0xc5a4, 0xbd8f, 0x9c91, 0x9430, 0x9451,
 0xb547, 0xbda3, 0xb567, 0x8c4b, 0x52c9, 0x1106, 0x00c6, 0x4205,
 0x6b66, 0x6327, 0x9cc7, 0xbda3, 0xadae, 0x6e3f, 0x6e5f, 0x6e5f,
 0x6e5f, 0x6e5f, 0x6e5f, 0x6e5f, 0x6e5f, 0x6e5f, 0xbdc9, 0xbda3,
 0x8e3b, 0x765f, 0x765f, 0x765f, 0xadf3, 0xbda3, 0xadf3, 0x9639,
 0xbda3, 0xb5cc, 0x7e5e, 0x75fd, 0xa56f, 0xbda3, 0xb5ce, 0x765f,
 0x765f, 0x765f, 0x765f, 0x765f, 0x865e, 0x963b, 0x8e3c, 0xadf3,
 0xbda3, 0xb5f1, 0x767f, 0x767f, 0x767f, 0x963a, 0xbda3, 0xbda3,
 0x865d, 0x767f, 0x865d, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0x865d,
 0x8e3c, 0xb5cd, 0xbda3, 0xbda3, 0xbda3, 0xadf4, 0x7e7f, 0xb5f0,
 0xbda3, 0xb5ce, 0x963a, 0x865d, 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f}, 

{ 0xa616, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xb54a, 0x8c0f, 0x9c92,
 0xa4e9, 0xbda3, 0xbda4, 0xbd86, 0xbd83, 0x9444, 0x1904, 0x0084,
 0x00c6, 0x31e7, 0xbd83, 0xbda3, 0x8d97, 0x6e5f, 0x765f, 0x765f,
 0x765f, 0x765f, 0x765f, 0x765f, 0x765f, 0x7e5e, 0xbda3, 0xbda3,
 0x8e3b, 0x765f, 0x765f, 0x865e, 0xbdc7, 0xbda3, 0xadf4, 0xbda4,
 0xbda3, 0xb5cd, 0xb5f1, 0xbdc6, 0xbda3, 0xbda3, 0xadb0, 0x765f,
 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x867e, 0xbdc8,
 0xbda3, 0x963a, 0x7e7f, 0x7e7f, 0x7e7f, 0xadf4, 0xbda3, 0xb5f0,
 0x7e7f, 0x7e7f, 0xadf4, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbdc7,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xa617, 0x7e7f, 0xa616,
 0xbda3, 0xbdc7, 0xbdcc, 0xbdca, 0xa616, 0x7e7f, 0x7e7f, 0x7e7f}, 

{ 0x7e5f, 0xc69b, 0xde55, 0xcdd1, 0xbdab, 0xbda3, 0x9c8d, 0x9cb1,
 0xbda4, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xb563, 0x4204, 0x0064,
 0x00a5, 0x7be6, 0xbda3, 0xb585, 0x659b, 0x765f, 0x765f, 0x765f,
 0x765f, 0x765f, 0x7e5f, 0x7e5f, 0x7e7f, 0x8e5c, 0xbda3, 0xbda3,
 0x865e, 0x7e7f, 0x7e5f, 0xb5f0, 0xbda3, 0xbdc9, 0xa616, 0xbda3,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xb5ad, 0x7538, 0x6dfd,
 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x9e39, 0xbda3,
 0xbdcb, 0x867f, 0x7e7f, 0x7e7f, 0x7e7f, 0xbdcc, 0xbda3, 0xa617,
 0x7e7f, 0x867e, 0xbdc6, 0xbda3, 0xbdcc, 0xbda3, 0xbda3, 0xbda3,
 0xbda3, 0xbdc5, 0xa637, 0xbdc7, 0xbda3, 0x9e39, 0x867e, 0xbdc8,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbdcc, 0x867e, 0x869f, 0x869f}, 

{ 0x7e3e, 0xbe9c, 0xde77, 0xd5d5, 0xbd52, 0xbda3, 0xad29, 0xad0c,
 0xbda3, 0xbda4, 0x9cac, 0x8c49, 0x7ba6, 0x2986, 0x10c4, 0x0064,
 0x00a5, 0xad04, 0xbda3, 0x8c6a, 0x659b, 0x765f, 0x767f, 0x7e7f,
 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x8e5d, 0xbda3, 0xbda3,
 0x8e5d, 0x965b, 0xb5ce, 0xbda3, 0xbda5, 0x9e38, 0x9e3a, 0xbda3,
 0xbda3, 0xbdc6, 0xb5ef, 0xa616, 0x965b, 0x7e5f, 0x657b, 0x657b,
 0x7e3e, 0x867e, 0x7e5e, 0x7e5e, 0x7e5e, 0x7e5f, 0xb5f0, 0xbda3,
 0xa638, 0x869f, 0x869f, 0x869f, 0x869f, 0xbda4, 0xbda3, 0x9e5a,
 0x869f, 0xa637, 0xbda3, 0xbda3, 0x967c, 0xae15, 0xbda3, 0xbdc7,
 0xae14, 0x8e7d, 0x967d, 0xbda3, 0xbda3, 0x965c, 0xa637, 0xbda3,
 0xbdc9, 0x9e39, 0xa638, 0x9e5a, 0x869f, 0x869f, 0x869f, 0x869f}, 

{ 0x865f, 0xbe9c, 0xde56, 0xc5cf, 0xbda5, 0xbda3, 0xa4ab, 0xb567,
 0xbda3, 0xa4e9, 0x83ce, 0x738a, 0x7386, 0x9464, 0x5284, 0x0064,
 0x2145, 0xbda3, 0xbda3, 0x42cc, 0x6d7b, 0x7e7f, 0x7e7f, 0x7e7f,
 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x7e7f, 0x8e7e, 0xbdc8, 0xbda3,
 0xbdc5, 0xbda3, 0xbda3, 0xbda3, 0xa638, 0x869f, 0x965c, 0xbda3,
 0xbda3, 0x869f, 0x869f, 0x869f, 0x869f, 0x869f, 0x7e5e, 0x655a,
 0x7559, 0x8dd9, 0x7517, 0x64f7, 0x5cd7, 0x6d5a, 0xbda4, 0xbdc7,
 0x8e7e, 0x869f, 0x869f, 0x869f, 0x8e9e, 0xbda3, 0xbda3, 0x967c,
 0x869f, 0xb5ee, 0xbda3, 0xbdcd, 0x8e9f, 0x8e9f, 0x8e9e, 0x8e9f,
 0x8e9f, 0x869f, 0x9e5a, 0xbda3, 0xbda4, 0x8e9e, 0xb5ef, 0xbda3,
 0xae15, 0x967d, 0x967c, 0x9e5a, 0xae16, 0x967d, 0x8e9f, 0x8e9f}, 

{ 0x963c, 0xbdc9, 0xbda3, 0xbda3, 0xbda3, 0xb56b, 0x838e, 0xb548,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xad23, 0x0064,
 0x2985, 0xbda3, 0xad25, 0x226d, 0x6d9b, 0x7e7f, 0x7e7f, 0x7e9f,
 0x7e9f, 0x869f, 0x869f, 0x869f, 0x869f, 0x869f, 0xae12, 0xbda3,
 0xbda3, 0xbda3, 0xbda3, 0xae15, 0x869f, 0x869f, 0xa638, 0xbda3,
 0xbdc8, 0x869f, 0x869f, 0x869f, 0x869f, 0x869f, 0x869f, 0x7e3d,
 0x7d16, 0x94d1, 0x6b8c, 0x52ca, 0x21a7, 0x3acc, 0xbda4, 0xb5ef,
 0x8e9f, 0x8e9f, 0x8e9f, 0x8ebf, 0x8ebf, 0xbdcb, 0xbda3, 0x9e7b,
 0x8ebf, 0xbdcc, 0xbda3, 0xa659, 0x8e9f, 0x8e9f, 0x8e9f, 0x8ebf,
 0x8ebf, 0x8ebf, 0xa659, 0xbda3, 0xb612, 0x8ebf, 0xb612, 0xbda3,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xb5ef, 0x8ebf, 0x8e9f}, 

{ 0x967d, 0xbda3, 0xbda3, 0xc5a8, 0xbd4e, 0xa4b2, 0x7b6d, 0x8c2a,
 0xbda3, 0xbda3, 0xbda3, 0xbda3, 0xbd83, 0xa4e4, 0x5ac5, 0x0063,
 0x00a5, 0xa4e5, 0xbda3, 0x6bcc, 0x6d7b, 0x867f, 0x869f, 0x869f,
 0x869f, 0x869f, 0x869f, 0x869f, 0x869f, 0x869f, 0x967d, 0xbdee,
 0xbdc7, 0xb5f0, 0x9e7b, 0x8e9f, 0x8e9f, 0x8e9f, 0xa659, 0xbda3,
 0xb613, 0x8e9f, 0x8e9f, 0x8ebf, 0x8ebf, 0x8ebf, 0x8ebf, 0x8e9f,
 0xa63a, 0x8c50, 0x738b, 0x6b6c, 0x31a6, 0x21c9, 0xadae, 0xbda3,
 0x9e7b, 0x8ebf, 0x8ebf, 0x8ebf, 0x8ebf, 0xae35, 0xbda3, 0x9e7c,
 0x8ebf, 0xae14, 0xbdca, 0x8e9f, 0x8ebf, 0x8ebf, 0x8ebf, 0x8ebf,
 0x8ebf, 0x8ebf, 0x969d, 0xb5ef, 0x9e7c, 0x8ebf, 0xa67a, 0xbdc7,
 0xbda3, 0xbda3, 0xbda3, 0xbdc9, 0xb612, 0x9e9c, 0x8ebf, 0x8ebf
}};

for (int i = 0; i < STROWARRAY; i++) {

	for (int j = 0; j < STCOWARRAY; j++) {

setup_time_bkg_pointers[i][j] = background [i][j];
background [i][j]=0;
}
}
}

